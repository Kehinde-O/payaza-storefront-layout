'use client';
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Button } from '../../../components/ui/button';
import { Modal } from '../../../components/ui/modal';
import { ImageWithFallback } from '../../../components/ui/image-with-fallback';
import { useToast } from '../../../components/ui/toast';
import { useStore } from '../../../lib/store-context';
import { Star, ArrowRight, Utensils, Calendar, Users, Mail, Phone, CheckCircle, Flame, Wine, Coffee, ChefHat, Clock } from 'lucide-react';
import { useState } from 'react';
import { formatCurrency } from '../../../lib/utils';
import { getLayoutText, getBannerImage, getAssetUrl } from '../../../lib/utils/asset-helpers';
import { VideoPlayer } from '../../../components/ui/video-player';
import { PromoBanner } from '../../shared/components/PromoBanner';
export function FoodHomePageModern({ storeConfig }) {
    const categories = storeConfig.categories || [];
    const menuItems = storeConfig.menuItems || [];
    const layoutConfig = storeConfig.layoutConfig;
    const { addToCart } = useStore();
    const { addToast } = useToast();
    // const [scrolled, setScrolled] = useState(false); // Handled by Header
    const [isReservationOpen, setIsReservationOpen] = useState(false);
    // const [isMenuOpen, setIsMenuOpen] = useState(false); // Handled by Header
    const [reservationStep, setReservationStep] = useState(1);
    const [isSubmitting, setIsSubmitting] = useState(false);
    const [activeTab, setActiveTab] = useState('all');
    // const [isSearchOpen, setIsSearchOpen] = useState(false); // Handled by Header
    // const [newsletterEmail, setNewsletterEmail] = useState(''); // Footer removed
    // Scroll listener removed as it was for header transparency
    const handleReservationSubmit = (e) => {
        e.preventDefault();
        setIsSubmitting(true);
        setTimeout(() => {
            setIsSubmitting(false);
            setReservationStep(2);
            addToast('Table reserved successfully!', 'success');
        }, 1500);
    };
    const closeReservation = () => {
        setIsReservationOpen(false);
        setTimeout(() => setReservationStep(1), 300);
    };
    const scrollToMenu = () => {
        const menuSection = document.getElementById('menu-section');
        if (menuSection) {
            menuSection.scrollIntoView({ behavior: 'smooth' });
        }
    };
    const filteredItems = activeTab === 'all'
        ? menuItems
        : menuItems.filter(item => item.categoryId === activeTab);
    // Get testimonials from layoutConfig sections or use fallback
    const testimonialsSection = layoutConfig?.sections?.testimonials;
    const backendTestimonials = testimonialsSection?.items || [];
    const fallbackTestimonials = [
        { id: '1', name: "Emily Clark", role: "Food Critic", comment: "An absolute masterpiece of culinary art. The flavors are balanced to perfection.", image: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&q=80" },
        { id: '2', name: "James Wilson", role: "Regular Guest", comment: "The atmosphere, the service, and the food - everything is just 10/10. My favorite spot in the city.", image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&q=80" },
        { id: '3', name: "Sarah & Mike", role: "Couple", comment: "We celebrated our anniversary here and it was magical. Highly recommend the tasting menu.", image: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&q=80" },
    ];
    const testimonials = backendTestimonials.length > 0
        ? backendTestimonials.map((t, idx) => ({
            id: t.id || String(idx + 1),
            name: t.name || fallbackTestimonials[idx]?.name || 'Customer',
            role: t.role || fallbackTestimonials[idx]?.role || 'Customer',
            comment: t.quote || t.comment || fallbackTestimonials[idx]?.comment || '',
            image: t.image || fallbackTestimonials[idx]?.image || '',
        }))
        : fallbackTestimonials;
    return (_jsxs("div", { className: "bg-[#0F0F0F] text-white font-sans selection:bg-orange-500 selection:text-white", children: [_jsxs("section", { "data-section": "hero", className: "relative h-screen w-full overflow-hidden flex items-center justify-center bg-[#0F0F0F]", children: [_jsxs("div", { className: "absolute inset-0 z-0", children: [_jsx(VideoPlayer, { src: getAssetUrl(storeConfig, 'hero_video', "https://cdn.coverr.co/videos/coverr-chef-preparing-food-in-kitchen-5379/1080p.mp4"), poster: getBannerImage(storeConfig, 'hero_video_poster', "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?q=80&w=2070&auto=format&fit=crop"), context: "background", className: "w-full h-full opacity-50 scale-105" }), _jsx("div", { className: "absolute inset-0 bg-gradient-to-t from-[#0F0F0F] via-[#0F0F0F]/40 to-black/30" }), _jsx("div", { className: "absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/noise.png')] opacity-20 mix-blend-overlay" })] }), _jsxs("div", { className: "relative z-10 text-center px-4 max-w-5xl mx-auto space-y-10", children: [_jsxs("div", { className: "flex justify-center items-center gap-6 animate-fade-in-up", children: [_jsx("span", { className: "h-px w-16 bg-white/30" }), _jsxs("div", { className: "flex items-center gap-2 text-orange-500 uppercase tracking-[0.3em] text-xs font-bold", children: [_jsx(Star, { className: "h-3 w-3 fill-current" }), " ", getLayoutText(storeConfig, 'food.ourPhilosophy', 'Michelin Star 2024')] }), _jsx("span", { className: "h-px w-16 bg-white/30" })] }), _jsxs("h1", { className: "text-5xl md:text-8xl lg:text-9xl font-black tracking-tighter leading-none uppercase text-white animate-fade-in-up delay-100", children: [getLayoutText(storeConfig, 'food.ourPhilosophy', 'Taste the Extraordinary'), " ", _jsx("br", {}), _jsx("span", { className: "text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-amber-200", children: "Extraordinary" })] }), _jsxs("p", { className: "text-lg md:text-xl text-gray-300 max-w-xl mx-auto font-light leading-relaxed animate-fade-in-up delay-200 tracking-wide", children: [storeConfig.description, " Where culinary art meets exceptional atmosphere."] }), _jsxs("div", { className: "flex flex-col sm:flex-row gap-6 justify-center items-center pt-8 animate-fade-in-up delay-300", children: [_jsx(Button, { onClick: () => setIsReservationOpen(true), className: "h-14 px-10 bg-orange-600 hover:bg-orange-700 text-white text-sm font-bold uppercase tracking-[0.2em] rounded-full transition-all hover:scale-105 hover:shadow-[0_0_40px_rgba(234,88,12,0.3)]", children: getLayoutText(storeConfig, 'food.reserveTable', 'Reserve Table') }), _jsx("div", { onClick: scrollToMenu, className: "w-14 h-14 rounded-full border border-white/20 flex items-center justify-center cursor-pointer hover:bg-white hover:text-black transition-all group", children: _jsx(ArrowRight, { className: "h-5 w-5 group-hover:rotate-90 transition-transform duration-300" }) })] })] }), _jsxs("div", { className: "absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-4 animate-pulse", children: [_jsx("span", { className: "text-[10px] uppercase tracking-[0.3em] text-gray-500", children: "Scroll" }), _jsx("div", { className: "w-px h-16 bg-gradient-to-b from-orange-500 to-transparent" })] })] }), layoutConfig?.sections?.story?.show !== false && (_jsxs("section", { className: "py-20 px-6 relative overflow-hidden", children: [_jsx("div", { className: "absolute top-0 right-0 w-1/3 h-full bg-white/5 skew-x-12 transform translate-x-20 pointer-events-none" }), _jsx("div", { className: "container mx-auto max-w-6xl relative z-10", children: _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center", children: [_jsxs("div", { className: "relative", children: [_jsx("div", { className: "aspect-[4/5] rounded-none overflow-hidden grayscale hover:grayscale-0 transition-all duration-700", children: _jsx(ImageWithFallback, { src: getBannerImage(storeConfig, 'about_section_image', "https://images.unsplash.com/photo-1559339352-11d035aa65de?w=1200&q=80"), alt: "Chef", className: "w-full h-full object-cover" }) }), _jsxs("div", { className: "absolute -bottom-10 -right-10 bg-[#1A1A1A] p-8 border border-white/5 max-w-xs hidden md:block", children: [_jsx("p", { className: "font-serif italic text-2xl text-white mb-4", children: "\"Cooking is an art, but patience is the key ingredient.\"" }), _jsx("p", { className: "text-orange-500 text-xs font-bold uppercase tracking-widest", children: "\u2014 Head Chef Marco" })] })] }), _jsxs("div", { className: "space-y-8", children: [_jsx("span", { className: "text-orange-500 font-bold uppercase tracking-widest text-xs", children: layoutConfig?.sections?.story?.label || getLayoutText(storeConfig, 'food.ourPhilosophy', 'Our Philosophy') }), _jsx("h2", { className: "text-4xl md:text-5xl font-bold leading-tight", children: layoutConfig?.sections?.story?.title || getLayoutText(storeConfig, 'food.ourPhilosophy', 'Crafting Memories Through Flavor') }), _jsx("p", { className: "text-gray-400 text-lg leading-relaxed", children: layoutConfig?.sections?.story?.description || getLayoutText(storeConfig, 'food.ourPhilosophy', 'We believe that dining is more than just eating; it\'s an experience that engages all senses. Our seasonal menu is carefully curated using locally sourced ingredients to bring you the freshest flavors of the region.') }), _jsxs("div", { className: "grid grid-cols-3 gap-8 pt-8 border-t border-white/10", children: [_jsxs("div", { children: [_jsx(Flame, { className: "h-8 w-8 text-orange-500 mb-4" }), _jsx("h4", { className: "font-bold text-lg", children: "Wood Fired" }), _jsx("p", { className: "text-sm text-gray-500 mt-2", children: "Authentic taste" })] }), _jsxs("div", { children: [_jsx(Wine, { className: "h-8 w-8 text-orange-500 mb-4" }), _jsx("h4", { className: "font-bold text-lg", children: "Fine Wines" }), _jsx("p", { className: "text-sm text-gray-500 mt-2", children: "Curated selection" })] }), _jsxs("div", { children: [_jsx(Coffee, { className: "h-8 w-8 text-orange-500 mb-4" }), _jsx("h4", { className: "font-bold text-lg", children: "Artisan Coffee" }), _jsx("p", { className: "text-sm text-gray-500 mt-2", children: "Roasted in-house" })] })] })] })] }) })] })), layoutConfig?.sections?.promoBanner?.show !== false && layoutConfig?.sections?.promoBanner && (_jsx(PromoBanner, { config: layoutConfig.sections.promoBanner, layoutStyle: "food", className: "my-20" })), _jsx("section", { id: "menu-section", className: "py-20 bg-[#141414] border-t border-white/5", children: _jsxs("div", { className: "container mx-auto px-6 max-w-7xl", children: [_jsxs("div", { className: "text-center mb-12", children: [_jsx("span", { className: "text-orange-500 font-bold uppercase tracking-widest text-xs mb-4 block", children: "Discover" }), _jsx("h2", { className: "text-4xl md:text-5xl font-bold uppercase tracking-tight mb-8", children: getLayoutText(storeConfig, 'food.menuCategories', 'Our Menu') }), _jsxs("div", { className: "flex flex-wrap justify-center gap-4", children: [_jsx("button", { onClick: () => setActiveTab('all'), className: `px-8 py-3 rounded-full text-sm font-bold uppercase tracking-wider transition-all border ${activeTab === 'all' ? 'bg-white text-black border-white' : 'bg-transparent text-gray-400 border-white/10 hover:border-white/30'}`, children: "All" }), categories.map((cat) => (_jsx("button", { onClick: () => setActiveTab(cat.id), className: `px-8 py-3 rounded-full text-sm font-bold uppercase tracking-wider transition-all border ${activeTab === cat.id ? 'bg-white text-black border-white' : 'bg-transparent text-gray-400 border-white/10 hover:border-white/30'}`, children: cat.name }, cat.id)))] })] }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16", children: filteredItems.map((item) => (_jsxs("div", { className: "group cursor-pointer", children: [_jsxs("div", { className: "aspect-square overflow-hidden rounded-full mb-6 border border-white/10 relative", children: [_jsx(ImageWithFallback, { src: item.image, alt: item.name, className: "w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 group-hover:rotate-3", skeletonAspectRatio: "square" }), _jsx("div", { className: "hidden lg:flex absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity items-center justify-center", children: _jsx(Button, { className: "bg-orange-600 rounded-full px-6 hover:bg-orange-700", onClick: (e) => {
                                                        e.preventDefault();
                                                        e.stopPropagation();
                                                        // Adapt menu item to product for cart
                                                        const product = {
                                                            ...item,
                                                            slug: item.id,
                                                            images: item.image ? [item.image] : [],
                                                            variants: [],
                                                            specifications: {},
                                                            rating: 0,
                                                            reviewCount: 0
                                                        };
                                                        addToCart(product);
                                                        addToast(`${item.name} added to order`, 'success');
                                                    }, children: "Order Now" }) }), _jsx("button", { className: "lg:hidden absolute bottom-2 right-2 bg-orange-600 text-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg z-10 active:scale-95 transition-transform", onClick: (e) => {
                                                    e.preventDefault();
                                                    e.stopPropagation();
                                                    const product = {
                                                        ...item,
                                                        slug: item.id,
                                                        images: item.image ? [item.image] : [],
                                                        variants: [],
                                                        specifications: {},
                                                        rating: 0,
                                                        reviewCount: 0
                                                    };
                                                    addToCart(product);
                                                    addToast(`${item.name} added to order`, 'success');
                                                }, children: _jsx(Utensils, { className: "h-5 w-5" }) })] }), _jsxs("div", { className: "text-center px-4", children: [_jsx("h3", { className: "text-xl font-bold uppercase tracking-wide mb-2 group-hover:text-orange-500 transition-colors", children: item.name }), _jsx("p", { className: "text-gray-500 text-sm mb-3 line-clamp-2", children: item.description }), _jsx("span", { className: "text-2xl font-serif text-white block", children: formatCurrency(item.price, item.currency || storeConfig.settings?.currency || 'USD') })] })] }, item.id))) })] }) }), testimonialsSection?.show !== false && (_jsx("section", { className: "py-20 px-6 bg-[#0F0F0F] border-t border-white/5", children: _jsxs("div", { className: "container mx-auto max-w-6xl", children: [_jsx("h2", { className: "text-3xl md:text-4xl font-bold text-center mb-12 uppercase tracking-tight", children: testimonialsSection?.title || getLayoutText(storeConfig, 'sections.testimonials.title', 'Guest Stories') }), testimonialsSection?.subtitle && (_jsx("p", { className: "text-center text-gray-400 mb-12 max-w-2xl mx-auto", children: testimonialsSection.subtitle })), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-8", children: testimonials.slice(0, 3).map((t) => (_jsxs("div", { className: "bg-[#1A1A1A] p-8 rounded-none border border-white/5 relative hover:-translate-y-2 transition-transform duration-300", children: [_jsx("div", { className: "absolute -top-5 left-8 text-6xl text-orange-500/20 font-serif", children: "\"" }), _jsx("p", { className: "text-gray-300 leading-relaxed mb-8 relative z-10 italic font-light", children: t.comment }), _jsxs("div", { className: "flex items-center gap-4", children: [_jsx(ImageWithFallback, { src: t.image, alt: t.name, className: "w-12 h-12 rounded-full object-cover grayscale" }), _jsxs("div", { children: [_jsx("h4", { className: "font-bold text-white text-sm uppercase tracking-wide", children: t.name }), _jsx("span", { className: "text-xs text-orange-500 font-bold uppercase tracking-widest", children: t.role })] })] })] }, t.id))) })] }) })), _jsxs("section", { className: "relative py-20 md:py-32 flex items-center justify-center overflow-hidden", children: [_jsx("div", { className: "absolute inset-0 bg-cover bg-center fixed-bg opacity-30 grayscale", style: { backgroundImage: `url('${getBannerImage(storeConfig, 'reservation_bg', "https://images.unsplash.com/photo-1559339352-11d035aa65de?q=80&w=1974&auto=format&fit=crop")}')` } }), _jsx("div", { className: "absolute inset-0 bg-[#0F0F0F]/80" }), _jsxs("div", { className: "relative z-10 text-center max-w-4xl mx-auto px-6", children: [_jsx(ChefHat, { className: "h-12 w-12 md:h-16 md:w-16 text-white/20 mx-auto mb-6 md:mb-8" }), _jsx("h2", { className: "text-4xl md:text-7xl font-bold uppercase tracking-tight mb-6 md:mb-8", children: "Your Table Awaits" }), _jsx("p", { className: "text-lg md:text-xl text-gray-300 mb-10 md:mb-12 font-light", children: "Experience the art of fine dining in the heart of the city." }), _jsx(Button, { onClick: () => setIsReservationOpen(true), className: "h-16 px-12 bg-white text-black hover:bg-orange-500 hover:text-white text-lg font-bold uppercase tracking-[0.2em] rounded-full transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,255,255,0.2)]", children: "Make a Reservation" })] })] }), _jsx(Modal, { isOpen: isReservationOpen, onClose: closeReservation, title: "Table Reservation", className: "bg-[#1A1A1A] text-white border border-white/10 rounded-none", children: reservationStep === 1 ? (_jsxs("form", { onSubmit: handleReservationSubmit, className: "space-y-6", children: [_jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { className: "space-y-2", children: [_jsx("label", { className: "text-xs font-bold uppercase tracking-wider text-gray-500", children: "Date" }), _jsxs("div", { className: "relative", children: [_jsx(Calendar, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }), _jsx("input", { type: "date", required: true, className: "w-full pl-10 pr-4 py-3 bg-[#0F0F0F] border border-white/10 rounded-none focus:outline-none focus:border-orange-500 text-sm" })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { className: "text-xs font-bold uppercase tracking-wider text-gray-500", children: "Time" }), _jsxs("div", { className: "relative", children: [_jsx(Clock, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }), _jsxs("select", { required: true, className: "w-full pl-10 pr-4 py-3 bg-[#0F0F0F] border border-white/10 rounded-none focus:outline-none focus:border-orange-500 text-sm text-gray-300", children: [_jsx("option", { children: "18:00" }), _jsx("option", { children: "18:30" }), _jsx("option", { children: "19:00" }), _jsx("option", { children: "19:30" }), _jsx("option", { children: "20:00" }), _jsx("option", { children: "20:30" })] })] })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { className: "text-xs font-bold uppercase tracking-wider text-gray-500", children: "Guests" }), _jsxs("div", { className: "relative", children: [_jsx(Users, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }), _jsx("select", { required: true, className: "w-full pl-10 pr-4 py-3 bg-[#0F0F0F] border border-white/10 rounded-none focus:outline-none focus:border-orange-500 text-sm text-gray-300", children: [1, 2, 3, 4, 5, 6, 7, 8].map(n => _jsxs("option", { value: n, children: [n, " People"] }, n)) })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { className: "text-xs font-bold uppercase tracking-wider text-gray-500", children: "Contact Details" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "relative", children: [_jsx(Users, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }), _jsx("input", { type: "text", placeholder: "Full Name", required: true, className: "w-full pl-10 pr-4 py-3 bg-[#0F0F0F] border border-white/10 rounded-none focus:outline-none focus:border-orange-500 text-sm" })] }), _jsxs("div", { className: "relative", children: [_jsx(Mail, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }), _jsx("input", { type: "email", placeholder: "Email Address", required: true, className: "w-full pl-10 pr-4 py-3 bg-[#0F0F0F] border border-white/10 rounded-none focus:outline-none focus:border-orange-500 text-sm" })] }), _jsxs("div", { className: "relative", children: [_jsx(Phone, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }), _jsx("input", { type: "tel", placeholder: "Phone Number", required: true, className: "w-full pl-10 pr-4 py-3 bg-[#0F0F0F] border border-white/10 rounded-none focus:outline-none focus:border-orange-500 text-sm" })] })] })] }), _jsx(Button, { type: "submit", disabled: isSubmitting, className: "w-full h-14 bg-orange-600 hover:bg-orange-700 text-white font-bold uppercase tracking-[0.2em] rounded-none mt-4", children: isSubmitting ? 'Confirming...' : 'Confirm Reservation' })] })) : (_jsxs("div", { className: "text-center py-8 space-y-6", children: [_jsx("div", { className: "w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto border border-green-500/20", children: _jsx(CheckCircle, { className: "h-10 w-10 text-green-500" }) }), _jsx("h3", { className: "text-2xl font-bold uppercase tracking-tight", children: "Confirmed" }), _jsx("p", { className: "text-gray-400", children: "Your table has been reserved. Check your email for details." }), _jsx(Button, { onClick: closeReservation, className: "bg-white text-black hover:bg-gray-200 rounded-none px-10 h-12 uppercase tracking-wider font-bold", children: "Close" })] })) })] }));
}
